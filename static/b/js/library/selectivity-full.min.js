!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.selectivity=t()}}(function(){return function t(e,i,s){function n(o,l){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!l&&h)return h(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var a=i[o]={exports:{}};e[o][0].call(a.exports,function(t){var i=e[o][1][t];return n(i?i:t)},a,a.exports,t,e,i,s)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(t,e){t(4),t(5),t(6),t(8),t(9),t(10),t(11),t(12),t(13),t(14),t(15),t(16),t(17),t(18),e.exports=t(7)},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,4:4,5:5,6:6,7:7,8:8,9:9}],2:[function(t,e){"use strict";function i(t,e){function i(){var n=e-(s()-l);if(0>=n||n>e){var c=u;h=u=void 0,c&&(a=s(),o=t.apply(null,r),h||(r=null))}else h=setTimeout(i,n)}function n(){return r=arguments,l=s(),u=!0,h||(h=setTimeout(i,e)),o}var r,o,l,h,u,a=0;return e=0>e?0:+e||0,n}var s=Date.now;e.exports=i},{}],3:[function(t,e){"use strict";function i(t){return n[t]}function s(t){return t?String(t).replace(r,i):""}var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},r=new RegExp("["+Object.keys(n).join("")+"]","g");e.exports=s},{}],4:[function(t){"use strict";var e=window.jQuery||window.Zepto,i=t(2),s=t(7);t(12),s.OptionListeners.unshift(function(t,n){var r=n.ajax;if(r&&r.url){var o=r.formatError||s.Locale.ajaxError,l=r.minimumInputLength||0,h=r.params,u=r.processItem||function(t){return t},a=r.quietMillis||0,c=r.results||function(t){return{results:t,more:!1}},d=r.transport||e.ajax;a&&(d=i(d,a)),n.query=function(i){var n=i.offset,a=i.term;if(a.length<l)i.error(s.Locale.needMoreCharacters(l-a.length));else{t.dropdown.showLoading();var p=r.url instanceof Function?r.url():r.url;h&&(p+=(p.indexOf("?")>-1?"&":"?")+e.param(h(a,n)));var f=r.success,v=r.error;d(e.extend({},r,{url:p,success:function(t,e,s){f&&f(t,e,s);var r=c(t,n);r.results=r.results.map(u),i.callback(r)},error:function(t,e,s){v&&v(t,e,s),i.error(o(a,t,e,s),{escape:!1})}}))}}}})},{12:12,2:2,7:7,jquery:"jquery"}],5:[function(t){"use strict";var e=t(7),i=0;e.OptionListeners.push(function(t,e){var s=e.query;s&&(e.query=function(t){i++;var e=i,n=t.callback,r=t.error;t.callback=function(){e===i&&n.apply(null,arguments)},t.error=function(){e===i&&r.apply(null,arguments)},s(t)})})},{7:7}],6:[function(t){"use strict";var e=window.jQuery||window.Zepto,i=t(9);e.extend(i.prototype,{addToDom:function(){this.$el.appendTo(this.selectivity.$el[0].ownerDocument.body)},removeCloseHandler:function(){this._$backdrop&&!this.parentMenu&&(this._$backdrop.remove(),this._$backdrop=null)},setupCloseHandler:function(){var t;this.parentMenu?t=this.parentMenu._$backdrop:(t=e("<div>").addClass("selectivity-backdrop"),e("body").append(t)),t.on("click",this.close.bind(this)),this._$backdrop=t}})},{9:9,jquery:"jquery"}],7:[function(t,e){"use strict";function i(t,e){var i;return this.each(function(){var r=this.selectivity;if(r){if("string"!==n.type(t)&&(e=t,t="setOptions"),"function"!==n.type(r[t]))throw new Error("Unknown method: "+t);void 0===i&&(i=r[t].call(r,e))}else if("string"===n.type(t)){if("destroy"!==t)throw new Error("Cannot call method on element without Selectivity instance")}else{e=n.extend({},t,{element:this});var o=n(this);o.is("select")&&o.prop("multiple")&&(e.multiple=!0);var l=s.InputTypes,h=e.inputType||(e.multiple?"Multiple":"Single");if("function"!==n.type(h)){if(!l[h])throw new Error("Unknown Selectivity input type: "+h);h=l[h]}this.selectivity=new h(e)}}),void 0===i?this:i}function s(t){return this instanceof s?(this.$el=n(t.element),this.$searchInput=null,this.dropdown=null,this.enabled=!0,this.hasTouch="undefined"!=typeof window&&"ontouchstart"in window,this.hasKeyboard=!this.hasTouch,this.items=null,this.matcher=s.matcher,this.options={},this.results=[],this.searchInputListeners=s.SearchInputListeners,this.templates=n.extend({},s.Templates),this.term="",this.setOptions(t),t.value?this.value(t.value,{triggerChange:!1}):this.data(t.data||null,{triggerChange:!1}),this._events=[],this.$el.on("selectivity-close",this._closed.bind(this)),void this.delegateEvents()):i.apply(this,arguments)}var n=window.jQuery||window.Zepto;n.extend(s.prototype,{$:function(t){return this.$el.find(t)},close:function(){this.dropdown&&this.dropdown.close()},data:function(t,e){return e=e||{},void 0===t?this._data:(t=this.validateData(t),this._data=t,this._value=this.getValueForData(t),e.triggerChange!==!1&&this.triggerChange(),void 0)},delegateEvents:function(){this.undelegateEvents(),n.each(this.events,function(t,e){var i,s=t.indexOf(" ");s>-1&&(i=t.slice(s+1),t=t.slice(0,s)),"string"===n.type(e)&&(e=this[e]),e=e.bind(this),i?this.$el.on(t,i,e):this.$el.on(t,e),this._events.push({event:t,selector:i,listener:e})}.bind(this))},destroy:function(){this.undelegateEvents();var t=this.$el;t.children().remove(),t[0].selectivity=null,t=null},filterResults:function(t){return t},focus:function(){this.$searchInput&&this.$searchInput.focus()},getItemForId:function(t){var e=this.items;return e?s.findNestedById(e,t):{id:t,text:""+t}},initSearchInput:function(t){this.$searchInput=t,this.searchInputListeners.forEach(function(e){e(this,t)}.bind(this)),t.on("keyup",function(t){t.isDefaultPrevented()||this.search()}.bind(this))},loadMore:function(){this.options.query({callback:function(t){if(!t||!t.results)throw new Error("callback must be passed a response object");this._addResults(s.processItems(t.results),{hasMore:!!t.more})}.bind(this),error:this._addResults.bind(this,[]),offset:this.results.length,selectivity:this,term:this.term})},open:function(t){if(t=t||{},!this.dropdown&&this.triggerEvent("selectivity-opening")){var e=this.options.dropdown||s.Dropdown;e&&(this.dropdown=new e({position:this.options.positionDropdown,selectivity:this,showSearchInput:t.showSearchInput})),this.search("")}},positionDropdown:function(){this.dropdown&&this.dropdown.position()},search:function(t){function e(e,s){i._setResults(e,n.extend({term:t},s))}var i=this;if(void 0===t){if(!i.$searchInput)return;t=i.$searchInput.val()}if(i.items){t=s.transformText(t);var r=i.matcher;e(i.items.map(function(e){return r(e,t)}).filter(function(t){return!!t}))}else i.options.query&&i.options.query({callback:function(t){if(!t||!t.results)throw new Error("callback must be passed a response object");e(s.processItems(t.results),{hasMore:!!t.more})},error:i._showError.bind(i),offset:0,selectivity:i,term:t});i.term=t},setOptions:function(t){t=t||{},s.OptionListeners.forEach(function(e){e(this,t)}.bind(this)),n.extend(this.options,t);var e=n.extend({closeOnSelect:"boolean",dropdown:"function|null",initSelection:"function|null",matcher:"function|null",placeholder:"string",positionDropdown:"function|null",query:"function|null",readOnly:"boolean",removeOnly:"boolean",searchInputListeners:"array"},t.allowedTypes);n.each(t,function(t,i){var r=e[t];if(r&&!r.split("|").some(function(t){return n.type(i)===t}))throw new Error(t+" must be of type "+r);switch(t){case"items":this.items=null===i?i:s.processItems(i);break;case"matcher":this.matcher=i;break;case"searchInputListeners":this.searchInputListeners=i;break;case"templates":n.extend(this.templates,i)}}.bind(this)),this.enabled=!this.options.readOnly&&!this.options.removeOnly},template:function(t,e){var i=this.templates[t];if(i)return"function"===n.type(i)?i(e):i.render?i.render(e):i.toString();throw new Error("Unknown template: "+t)},triggerChange:function(t){this.triggerEvent("change",n.extend({value:this._value},t))},triggerEvent:function(t,e){var i=n.Event(t,e||{});return this.$el.trigger(i),!i.isDefaultPrevented()},undelegateEvents:function(){this._events.forEach(function(t){t.selector?this.$el.off(t.event,t.selector,t.listener):this.$el.off(t.event,t.listener)},this),this._events=[]},val:function(t){return this.value(t)},validateItem:function(t){if(t&&s.isValidId(t.id)&&"string"===n.type(t.text))return t;throw new Error("Item should have id (number or string) and text (string) properties")},value:function(t,e){return e=e||{},void 0===t?this._value:(t=this.validateValue(t),this._value=t,this.options.initSelection?this.options.initSelection(t,function(i){this._value===t&&(this._data=this.validateData(i),e.triggerChange!==!1&&this.triggerChange())}.bind(this)):(this._data=this.getDataForValue(t),e.triggerChange!==!1&&this.triggerChange()),void 0)},_addResults:function(t,e){this.results=this.results.concat(t),this.dropdown&&this.dropdown.showResults(this.filterResults(t),n.extend({add:!0},e))},_closed:function(){this.dropdown=null},_getItemId:function(t){var e;e=t.target?n(t.target).closest("[data-item-id]"):t.length?t:n(t);var i=e.data("item-id");return"string"===n.type(i)?i:s.findById(this._data||[],i)||s.findNestedById(this.results,i)?i:""+i},_setResults:function(t,e){this.results=t,this.dropdown&&this.dropdown.showResults(this.filterResults(t),e||{})},_showError:function(t,e){this.results=[],this.dropdown&&this.dropdown.showError(t,e)}}),s.Dropdown=null,s.InputTypes={},s.OptionListeners=[],s.SearchInputListeners=[],s.Templates={},s.findById=function(t,e){var i=s.findIndexById(t,e);return i>-1?t[i]:null},s.findIndexById=function(t,e){for(var i=0,s=t.length;s>i;i++)if(t[i].id===e)return i;return-1},s.findNestedById=function(t,e){for(var i=0,n=t.length;n>i;i++){var r=t[i];if(r.id===e)return r;if(r.children){var o=s.findNestedById(r.children,e);if(o)return o}}return null},s.inherits=function(t,e,i){return 2===arguments.length&&(i=e,e=s),t.prototype=n.extend(Object.create(e.prototype),{constructor:t},i),function(t,i){e.prototype[i].apply(t,Array.prototype.slice.call(arguments,2))}},s.isValidId=function(t){var e=n.type(t);return"number"===e||"string"===e},s.matcher=function(t,e){var i=null;if(s.transformText(t.text).indexOf(e)>-1)i=t;else if(t.children){var n=t.children.map(function(t){return s.matcher(t,e)}).filter(function(t){return!!t});n.length&&(i={id:t.id,text:t.text,children:n})}return i},s.processItem=function(t){if(s.isValidId(t))return{id:t,text:""+t};if(t&&(s.isValidId(t.id)||t.children)&&"string"===n.type(t.text))return t.children&&(t.children=s.processItems(t.children)),t;throw new Error("invalid item")},s.processItems=function(t){if("array"===n.type(t))return t.map(s.processItem);throw new Error("invalid items")},s.quoteCssAttr=function(t){return'"'+(""+t).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},s.transformText=function(t){return t.toLowerCase()},e.exports=n.fn.selectivity=s},{jquery:"jquery"}],8:[function(t){"use strict";var e={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"},i=t(7),s=i.transformText;i.transformText=function(t){for(var i="",n=0,r=t.length;r>n;n++){var o=t[n];i+=e[o]||o}return s(i)}},{7:7}],9:[function(t,e){"use strict";function i(t){var e=t.selectivity;this.$el=s(e.template("dropdown",{dropdownCssClass:e.options.dropdownCssClass,searchInputPlaceholder:e.options.searchInputPlaceholder,showSearchInput:t.showSearchInput})),this.$results=this.$(".selectivity-results-container"),this.hasMore=!1,this.highlightedResult=null,this.loadMoreHighlighted=!1,this.options=t,this.results=[],this.selectivity=e,this._closeProxy=this.close.bind(this),e.options.closeOnSelect!==!1&&e.$el.on("selectivity-selecting",this._closeProxy),this.addToDom(),this.position(),this.setupCloseHandler(),this._scrolledProxy=n(this._scrolled.bind(this),50),this._suppressMouseWheel(),t.showSearchInput&&(e.initSearchInput(this.$(".selectivity-search-input")),e.focus()),this._delegateEvents(),this.showLoading(),this.triggerOpen()}var s=window.jQuery||window.Zepto,n=t(2),r=t(7);s.extend(i.prototype,{$:function(t){return this.$el.find(t)},addToDom:function(){this.$el.appendTo(this.selectivity.$el[0].ownerDocument.body)},close:function(){this.$el.remove(),this.removeCloseHandler(),this.selectivity.$el.off("selectivity-selecting",this._closeProxy),this.triggerClose()},events:{"click .selectivity-load-more":"_loadMoreClicked","click .selectivity-result-item":"_resultClicked","mouseenter .selectivity-load-more":"highlightLoadMore","mouseenter .selectivity-result-item":"_resultHovered"},highlight:function(t){this.loadMoreHighlighted&&this.$(".selectivity-load-more").removeClass("highlight"),this.$(".selectivity-result-item").removeClass("highlight").filter("[data-item-id="+r.quoteCssAttr(t.id)+"]").addClass("highlight"),this.highlightedResult=t,this.loadMoreHighlighted=!1,this.selectivity.triggerEvent("selectivity-highlight",{item:t,id:t.id})},highlightLoadMore:function(){this.$(".selectivity-result-item").removeClass("highlight"),this.$(".selectivity-load-more").addClass("highlight"),this.highlightedResult=null,this.loadMoreHighlighted=!0},position:function(){var t=this.options.position;t&&t(this.$el,this.selectivity.$el),this._scrolled()},removeCloseHandler:function(){s("body").off("click",this._closeProxy)},renderItems:function(t){var e=this.selectivity;return t.map(function(t){var i=e.template(t.id?"resultItem":"resultLabel",t);return t.children&&(i+=e.template("resultChildren",{childrenHtml:this.renderItems(t.children)})),i},this).join("")},selectHighlight:function(){this.highlightedResult?this.selectItem(this.highlightedResult.id):this.loadMoreHighlighted&&this._loadMoreClicked()},selectItem:function(t){var e=this.selectivity,i=r.findNestedById(e.results,t);if(i){var s={id:t,item:i};e.triggerEvent("selectivity-selecting",s)&&e.triggerEvent("selectivity-selected",s)}},setupCloseHandler:function(){s("body").on("click",this._closeProxy)},showError:function(t,e){e=e||{},this.$results.html(this.selectivity.template("error",{escape:e.escape!==!1,message:t})),this.hasMore=!1,this.results=[],this.highlightedResult=null,this.loadMoreHighlighted=!1,this.position()},showLoading:function(){this.$results.html(this.selectivity.template("loading")),this.hasMore=!1,this.results=[],this.highlightedResult=null,this.loadMoreHighlighted=!1,this.position()},showResults:function(t,e){var i=this.renderItems(t);e.hasMore?i+=this.selectivity.template("loadMore"):i||e.add||(i=this.selectivity.template("noResults",{term:e.term})),e.add?(this.$(".selectivity-loading").replaceWith(i),this.results=this.results.concat(t)):(this.$results.html(i),this.results=t),this.hasMore=e.hasMore,(!e.add||this.loadMoreHighlighted)&&this._highlightFirstItem(t),this.position()},triggerClose:function(){this.selectivity.$el.trigger("selectivity-close")},triggerOpen:function(){this.selectivity.$el.trigger("selectivity-open")},_delegateEvents:function(){s.each(this.events,function(t,e){var i=t.indexOf(" "),n=t.slice(i+1);t=t.slice(0,i),"string"===s.type(e)&&(e=this[e]),e=e.bind(this),this.$el.on(t,n,e)}.bind(this)),this.$results.on("scroll touchmove touchend",this._scrolledProxy)},_highlightFirstItem:function(t){function e(t){for(var i=0,s=t.length;s>i;i++){var n=t[i];if(n.id)return n;if(n.children){var r=e(n.children);if(r)return r}}}var i=e(t);i?this.highlight(i):(this.highlightedResult=null,this.loadMoreHighlighted=!1)},_loadMoreClicked:function(){return this.$(".selectivity-load-more").replaceWith(this.selectivity.template("loading")),this.selectivity.loadMore(),this.selectivity.focus(),!1},_resultClicked:function(t){return this.selectItem(this.selectivity._getItemId(t)),!1},_resultHovered:function(t){var e=this.selectivity._getItemId(t),i=r.findNestedById(this.results,e);i&&this.highlight(i)},_scrolled:function(){var t=this.$(".selectivity-load-more");t.length&&t[0].offsetTop-this.$results[0].scrollTop<this.$el.height()&&this._loadMoreClicked()},_scrollToHighlight:function(t){var e;if(this.highlightedResult){var i=r.quoteCssAttr(this.highlightedResult.id);e=this.$(".selectivity-result-item[data-item-id="+i+"]")[0]}else{if(!this.loadMoreHighlighted)return;e=this.$(".selectivity-load-more")[0]}var s=e.getBoundingClientRect(),n=this.$results[0].getBoundingClientRect();(s.top<n.top||s.bottom>n.bottom)&&e.scrollIntoView(t.alignToTop)},_suppressMouseWheel:function(){var t=this.selectivity.options.suppressMouseWheelSelector;if(null!==t){var e=t||".selectivity-results-container";this.$el.on("DOMMouseScroll mousewheel",e,function(t){function e(){return t.stopPropagation(),t.preventDefault(),t.returnValue=!1,!1}var i=s(this),n=this.scrollTop,r=this.scrollHeight,o=i.height(),l=t.originalEvent,h="DOMMouseScroll"===t.type?-40*l.detail:l.wheelDelta,u=h>0;if(r>o){if(!u&&-h>r-o-n)return i.scrollTop(r),e();if(u&&h>n)return i.scrollTop(0),e()}})}}}),e.exports=r.Dropdown=i},{2:2,7:7,jquery:"jquery"}],10:[function(t,e){"use strict";function i(t){var e=t.indexOf("@"),i=t.lastIndexOf("."),s=t.indexOf(" ");return e>0&&i>e+1&&i<t.length-2&&-1===s}function s(t,e){e=void 0===e?t.length:e;for(var i=e-1;i>=0;i--)if(/\s/.test(t[i]))return t.slice(i+1,e);return t.slice(0,e)}function n(t,e){return t.slice(0,1)===e[0]&&t.slice(-1)===e[1]?t.slice(1,-1).trim():t.trim()}function r(t){var e=s(t),r=t.slice(0,-e.length).trim();return i(e)?(e=n(n(e,"()"),"<>"),r=n(r,'""').trim()||e,{id:e,text:r}):t.trim()?{id:t,text:t}:null}function o(t,e,n){function o(t){if(t)for(var e=0,n=t.length;n>e;e++)switch(t[e]){case";":case",":case"\n":return!0;case" ":case"	":if(i(s(t,e)))return!0;break;case'"':do e++;while(n>e&&'"'!==t[e]);break;default:continue}return!1}function l(t){for(var e=0,n=t.length;n>e;e++)switch(t[e]){case";":case",":case"\n":return{term:t.slice(0,e),input:t.slice(e+1)};case" ":case"	":if(i(s(t,e)))return{term:t.slice(0,e),input:t.slice(e+1)};break;case'"':do e++;while(n>e&&'"'!==t[e]);break;default:continue}return{}}for(;o(t);){var h=l(t);if(h.term){var a=r(h.term);!a||a.id&&u.findById(e,a.id)||n(a)}t=h.input}return t}function l(t){a.call(this,t)}var h=window.jQuery||window.Zepto,u=t(7),a=t(13),c=u.inherits(l,a,{initSearchInput:function(t){c(this,"initSearchInput",t),t.on("blur",function(){var e=t.val();i(s(e))&&this.add(r(e))}.bind(this))},setOptions:function(t){t=h.extend({createTokenItem:r,showDropdown:!1,tokenizer:o},t),c(this,"setOptions",t)}});e.exports=u.InputTypes.Email=l},{13:13,7:7,jquery:"jquery"}],11:[function(t){"use strict";function e(t,e){function l(t,e){function s(t,e){for(var i=0,s=t.length;s>i;i++)if(t.eq(i).is(e))return i;return-1}function n(){var s;if(t.highlightedResult){var n=i.quoteCssAttr(t.highlightedResult.id);s=t.$(".selectivity-result-item[data-item-id="+n+"]")[0]}else{if(!t.loadMoreHighlighted)return;s=t.$(".selectivity-load-more")[0]}var r=s.getBoundingClientRect(),o=t.$results[0].getBoundingClientRect();(r.top<o.top||r.bottom>o.bottom)&&s.scrollIntoView(0>e)}var r=t.results;if(r.length){var o=t.$(".selectivity-result-item"),l=e>0?0:o.length-1,h=l,u=t.highlightedResult;if(u){var a=i.quoteCssAttr(u.id);if(h=s(o,"[data-item-id="+a+"]")+e,e>0?h>=o.length:0>h){if(t.hasMore)return t.highlightLoadMore(),void n();h=l}}var c=i.findNestedById(r,t.selectivity._getItemId(o[h]));c&&(t.highlight(c),n())}}function h(e){var i=t.dropdown;i&&(e.keyCode===s?l(i,1):e.keyCode===o&&l(i,-1))}function u(e){function i(){t.options.showDropdown!==!1&&t.open()}var l=t.dropdown;e.keyCode!==n||e.ctrlKey?e.keyCode===r?(t.close(),e.preventDefault()):e.keyCode===s||e.keyCode===o?(i(),e.preventDefault()):i():(l?l.selectHighlight():t.options.showDropdown!==!1&&i(),e.preventDefault())}e.on("keydown",h).on("keyup",u)}var i=t(7),s=40,n=13,r=27,o=38;i.SearchInputListeners.push(e)},{7:7}],12:[function(t){"use strict";var e=t(3),i=t(7);i.Locale={ajaxError:function(t){return"Failed to fetch results for <b>"+e(t)+"</b>"},loading:"Loading...",loadMore:"Load more...",needMoreCharacters:function(t){return"Enter "+t+" more characters to search"},noResults:"No results found",noResultsForTerm:function(t){return"No results for <b>"+e(t)+"</b>"}}},{3:3,7:7}],13:[function(t,e){"use strict";function i(t){n.call(this,t),this.$el.html(this.template("multipleSelectInput",{enabled:this.enabled})),this._highlightedItemId=null,this.initSearchInput(this.$(".selectivity-multiple-input:not(.selectivity-width-detector)")),this._rerenderSelection(),t.positionDropdown||(this.options.positionDropdown=function(t,e){var i=e.offset(),n=t.height(),r=e.height(),o=e[0].getBoundingClientRect().top+r+n;t.css({left:i.left+"px",top:i.top+("undefined"!=typeof window&&o>s(window).height()?-n:r)+"px"}).width(e.width())})}var s=window.jQuery||window.Zepto,n=t(7),r=8,o=46,l=13,h=n.inherits(i,{add:function(t){var e=n.isValidId(t),i=e?t:this.validateItem(t)&&t.id;-1===this._value.indexOf(i)&&(this._value.push(i),e&&this.options.initSelection?this.options.initSelection([i],function(e){this._value.indexOf(i)>-1&&(t=this.validateItem(e[0]),this._data.push(t),this.triggerChange({added:t}))}.bind(this)):(e&&(t=this.getItemForId(i)),this._data.push(t),this.triggerChange({added:t}))),this.$searchInput.val("")},clear:function(){this.data([])},events:{change:"_rerenderSelection","change .selectivity-multiple-input":function(){return!1},click:"_clicked","click .selectivity-multiple-selected-item":"_itemClicked","keydown .selectivity-multiple-input":"_keyHeld","keyup .selectivity-multiple-input":"_keyReleased","paste .selectivity-multiple-input":"_onPaste","selectivity-selected":"_resultSelected"},filterResults:function(t){return t.filter(function(t){return!n.findById(this._data,t.id)},this)},getDataForValue:function(t){return t.map(this.getItemForId.bind(this)).filter(function(t){return!!t})},getValueForData:function(t){return t.map(function(t){return t.id})},remove:function(t){var e,i="object"===s.type(t)?t.id:t,r=n.findIndexById(this._data,i);r>-1&&(e=this._data[r],this._data.splice(r,1)),this._value[r]!==i&&(r=this._value.indexOf(i)),r>-1&&this._value.splice(r,1),e&&this.triggerChange({removed:e}),i===this._highlightedItemId&&(this._highlightedItemId=null)},search:function(){var t=this.$searchInput.val();this.options.tokenizer&&(t=this.options.tokenizer(t,this._data,this.add.bind(this),this.options),"string"===s.type(t)?this.$searchInput.val(t):t=""),this.dropdown&&h(this,"search")},setOptions:function(t){t=t||{};var e="backspaceHighlightsBeforeDelete";void 0===t[e]&&(t[e]=this.hasTouch),t.allowedTypes=t.allowedTypes||{},t.allowedTypes[e]="boolean",h(this,"setOptions",t)},validateData:function(t){if(null===t)return[];if("array"===s.type(t))return t.map(this.validateItem.bind(this));throw new Error("Data for MultiSelectivity instance should be array")},validateValue:function(t){if(null===t)return[];if("array"===s.type(t)){if(t.every(n.isValidId))return t;throw new Error("Value contains invalid IDs")}throw new Error("Value for MultiSelectivity instance should be an array")},_backspacePressed:function(){this.options.backspaceHighlightsBeforeDelete?this._highlightedItemId?this._deletePressed():this._value.length&&this._highlightItem(this._value.slice(-1)[0]):this._value.length&&this.remove(this._value.slice(-1)[0])},_clicked:function(){return this.enabled?(this.focus(),this._open(),!1):void 0},_createToken:function(){var t=this.$searchInput.val(),e=this.options.createTokenItem;if(t&&e){var i=e(t);i&&this.add(i)}},_deletePressed:function(){this._highlightedItemId&&this.remove(this._highlightedItemId)},_highlightItem:function(t){this._highlightedItemId=t,this.$(".selectivity-multiple-selected-item").removeClass("highlighted").filter("[data-item-id="+n.quoteCssAttr(t)+"]").addClass("highlighted"),this.hasKeyboard&&this.focus()},_itemClicked:function(t){this.enabled&&this._highlightItem(this._getItemId(t))},_itemRemoveClicked:function(t){return this.remove(this._getItemId(t)),this._updateInputWidth(),!1},_keyHeld:function(){this._originalValue=this.$searchInput.val()},_keyReleased:function(t){var e=!!this._originalValue;t.keyCode!==l||t.ctrlKey?t.keyCode!==r||e?t.keyCode!==o||e||this._deletePressed():this._backspacePressed():this.options.createTokenItem&&this._createToken(),this._updateInputWidth()},_onPaste:function(){setTimeout(function(){this.search(),this.options.createTokenItem&&this._createToken()}.bind(this),10)},_open:function(){this.options.showDropdown!==!1&&this.open()},_renderSelectedItem:function(t){this.$searchInput.before(this.template("multipleSelectedItem",s.extend({highlighted:t.id===this._highlightedItemId,removable:!this.options.readOnly},t)));var e=n.quoteCssAttr(t.id);this.$(".selectivity-multiple-selected-item[data-item-id="+e+"]").find(".selectivity-multiple-selected-item-remove").on("click",this._itemRemoveClicked.bind(this))},_rerenderSelection:function(t){if(t=t||{},t.added)this._renderSelectedItem(t.added),this._scrollToBottom();else if(t.removed){var e=n.quoteCssAttr(t.removed.id);this.$(".selectivity-multiple-selected-item[data-item-id="+e+"]").remove()}else this.$(".selectivity-multiple-selected-item").remove(),this._data.forEach(this._renderSelectedItem,this),this._updateInputWidth();(t.added||t.removed)&&(this.dropdown&&this.dropdown.showResults(this.filterResults(this.results),{hasMore:this.dropdown.hasMore}),this.hasKeyboard&&this.focus()),this.positionDropdown(),this._updatePlaceholder()},_resultSelected:function(t){-1===this._value.indexOf(t.id)?this.add(t.item):this.remove(t.item)},_scrollToBottom:function(){var t=this.$(".selectivity-multiple-input-container");t.scrollTop(t.height())
},_updateInputWidth:function(){if(this.enabled){var t=this.$searchInput,e=this.$(".selectivity-width-detector");e.text(t.val()||!this._data.length&&this.options.placeholder||""),t.width(e.width()+20),this.positionDropdown()}},_updatePlaceholder:function(){var t=this._data.length?"":this.options.placeholder;this.enabled?this.$searchInput.attr("placeholder",t):this.$(".selectivity-placeholder").text(t)}});e.exports=n.InputTypes.Multiple=i},{7:7,jquery:"jquery"}],14:[function(t,e){"use strict";function i(t){n.call(this,t),this.$el.html(this.template("singleSelectInput",this.options)),this._rerenderSelection(),t.positionDropdown||(this.options.positionDropdown=function(t,e){var i=e.offset(),n=i.top+e.height();if("undefined"!=typeof window){var r=e[0].getBoundingClientRect(),o=t.height(),l=s(window).height();r.top+o>l&&(n=Math.max(l-o+i.top-r.top,0))}t.css({left:i.left+"px",top:n+"px"}).width(e.width())})}var s=window.jQuery||window.Zepto,n=t(7),r=n.inherits(i,{events:{change:"_rerenderSelection",click:"_clicked","selectivity-selected":"_resultSelected"},clear:function(){this.data(null)},getDataForValue:function(t){return this.getItemForId(t)},getValueForData:function(t){return t?t.id:null},setOptions:function(t){t=t||{},t.allowedTypes=s.extend(t.allowedTypes||{},{allowClear:"boolean",showSearchInputInDropdown:"boolean"}),r(this,"setOptions",t)},validateData:function(t){return null===t?t:this.validateItem(t)},validateValue:function(t){if(null===t||n.isValidId(t))return t;throw new Error("Value for SingleSelectivity instance should be a valid ID or null")},_clicked:function(){return this.enabled?(this.dropdown?this.close():this.options.showDropdown!==!1&&this.open({showSearchInput:this.options.showSearchInputInDropdown!==!1}),!1):void 0},_itemRemoveClicked:function(){return this.data(null),!1},_rerenderSelection:function(){var t=this.$(".selectivity-single-result-container");this._data?(t.html(this.template("singleSelectedItem",s.extend({removable:this.options.allowClear&&!this.options.readOnly},this._data))),t.find(".selectivity-single-selected-item-remove").on("click",this._itemRemoveClicked.bind(this))):t.html(this.template("singleSelectPlaceholder",{placeholder:this.options.placeholder}))},_resultSelected:function(t){this.data(t.item),this.close()}});e.exports=n.InputTypes.Single=i},{7:7,jquery:"jquery"}],15:[function(t,e){"use strict";function i(t){this.parentMenu=t.parentMenu,n.call(this,t),this._closeSubmenuTimeout=0}var s=t(7),n=t(9),r=s.inherits(i,n,{close:function(){this.options.restoreOptions&&this.selectivity.setOptions(this.options.restoreOptions),this.options.restoreResults&&(this.selectivity.results=this.options.restoreResults),this.submenu&&this.submenu.close(),r(this,"close"),this.parentMenu&&(this.parentMenu.submenu=null,this.parentMenu=null)},highlight:function(t){if(this.submenu){if(!this.highlightedResult||this.highlightedResult.id!==t.id)return this._closeSubmenuTimeout&&clearTimeout(this._closeSubmenuTimeout),void(this._closeSubmenuTimeout=setTimeout(this._closeSubmenuAndHighlight.bind(this,t),100))}else this.parentMenu&&this.parentMenu._closeSubmenuTimeout&&(clearTimeout(this.parentMenu._closeSubmenuTimeout),this.parentMenu._closeSubmenuTimeout=0);this._doHighlight(t)},selectHighlight:function(){this.submenu?this.submenu.selectHighlight():r(this,"selectHighlight")},selectItem:function(t){var e=this.selectivity,i=s.findNestedById(e.results,t);if(i&&!i.submenu){var n={id:t,item:i};e.triggerEvent("selectivity-selecting",n)&&e.triggerEvent("selectivity-selected",n)}},showResults:function(t,e){this.submenu?this.submenu.showResults(t,e):r(this,"showResults",t,e)},triggerClose:function(){this.parentMenu?this.selectivity.$el.trigger("selectivity-close-submenu"):r(this,"triggerClose")},triggerOpen:function(){this.parentMenu?this.selectivity.$el.trigger("selectivity-open-submenu"):r(this,"triggerOpen")},_closeSubmenuAndHighlight:function(t){this.submenu&&this.submenu.close(),this._doHighlight(t)},_doHighlight:function(t){if(r(this,"highlight",t),t.submenu&&!this.submenu){var e=this.selectivity,i=e.options.dropdown||s.Dropdown;if(i){var n=s.quoteCssAttr(t.id),o=this.$(".selectivity-result-item[data-item-id="+n+"]"),l=this.$el;this.submenu=new i({parentMenu:this,position:t.submenu.positionDropdown||function(t){var e=o.offset(),i=l.width();t.css({left:e.left+i+"px",top:e.top+"px"}).width(i)},restoreOptions:{items:e.items,query:e.options.query||null},restoreResults:e.results,selectivity:e,showSearchInput:t.submenu.showSearchInput}),e.setOptions({items:t.submenu.items||null,query:t.submenu.query||null}),e.search("")}}}});s.Dropdown=i,s.findNestedById=function(t,e){for(var i=0,n=t.length;n>i;i++){var r,o=t[i];if(o.id===e?r=o:o.children?r=s.findNestedById(o.children,e):o.submenu&&o.submenu.items&&(r=s.findNestedById(o.submenu.items,e)),r)return r}return null},e.exports=i},{7:7,9:9}],16:[function(t){"use strict";var e=t(3),i=t(7);t(12),i.Templates={dropdown:function(t){var i=t.dropdownCssClass?" "+t.dropdownCssClass:"",s="";if(t.showSearchInput){i+=" has-search-input";var n=t.searchInputPlaceholder;s='<div class="selectivity-search-input-container"><input class="selectivity-search-input"'+(n?' placeholder="'+e(n)+'"':"")+"></div>"}return'<div class="selectivity-dropdown'+i+'">'+s+'<div class="selectivity-results-container"></div></div>'},error:function(t){return'<div class="selectivity-error">'+(t.escape?e(t.message):t.message)+"</div>"},loading:function(){return'<div class="selectivity-loading">'+i.Locale.loading+"</div>"},loadMore:function(){return'<div class="selectivity-load-more">'+i.Locale.loadMore+"</div>"},multipleSelectInput:function(t){return'<div class="selectivity-multiple-input-container">'+(t.enabled?'<input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" class="selectivity-multiple-input"><span class="selectivity-multiple-input selectivity-width-detector"></span>':'<div class="selectivity-multiple-input selectivity-placeholder"></div>')+'<div class="selectivity-clearfix"></div></div>'},multipleSelectedItem:function(t){var i=t.highlighted?" highlighted":"";return'<span class="selectivity-multiple-selected-item'+i+'" data-item-id="'+e(t.id)+'">'+e(t.text)+(t.removable?'<a class="selectivity-multiple-selected-item-remove"><i class="icon-remove"></i></a>':"")+"</span>"},noResults:function(t){var e=i.Locale;return'<div class="selectivity-error">'+(t.term?e.noResultsForTerm(t.term):e.noResults)+"</div>"},resultChildren:function(t){return'<div class="selectivity-result-children">'+t.childrenHtml+"</div>"},resultItem:function(t){return'<div class="selectivity-result-item" data-item-id="'+e(t.id)+'">'+e(t.text)+(t.submenu?'<i class="selectivity-submenu-icon fa fa-chevron-right"></i>':"")+"</div>"},resultLabel:function(t){return'<div class="selectivity-result-label">'+e(t.text)+"</div>"},singleSelectInput:'<div class="selectivity-single-select"><div class="selectivity-single-result-container"></div><i class="fa fa-sort-desc selectivity-caret"></i></div>',singleSelectPlaceholder:function(t){return'<div class="selectivity-placeholder">'+e(t.placeholder)+"</div>"},singleSelectedItem:function(t){return'<span class="selectivity-single-selected-item" data-item-id="'+e(t.id)+'">'+(t.removable?'<a class="selectivity-single-selected-item-remove"><i class="fa fa-remove"></i></a>':"")+e(t.text)+"</span>"}}},{12:12,3:3,7:7}],17:[function(t){"use strict";function e(t,e,i,n){function r(t){return t?h.some(function(e){return t.indexOf(e)>-1}):!1}function o(t){for(var e=0,i=t.length;i>e;e++)if(h.indexOf(t[e])>-1)return{term:t.slice(0,e),input:t.slice(e+1)};return{}}for(var l=n.createTokenItem||function(t){return t?{id:t,text:t}:null},h=n.tokenSeparators;r(t);){var u=o(t);if(u.term){var a=l(u.term);a&&!s.findById(e,a.id)&&i(a)}t=u.input}return t}var i=window.jQuery||window.Zepto,s=t(7);s.OptionListeners.push(function(t,s){s.tokenSeparators&&(s.allowedTypes=i.extend({tokenSeparators:"array"},s.allowedTypes),s.tokenizer=s.tokenizer||e)})},{7:7,jquery:"jquery"}],18:[function(t){"use strict";function e(t,e){var s=e.multiple?[]:null,n=function(){var t=i(this);if(t.is("option")){var r=t.attr("value")||t.text();return t.prop("selected")&&(e.multiple?s.push(r):s=r),{id:r,text:t.attr("label")||t.text()}}return{text:t.attr("label"),children:t.children("option,optgroup").map(n).get()}};e.allowClear="allowClear"in e?e.allowClear:!t.prop("required"),e.items=t.children("option,optgroup").map(n).get(),e.placeholder=e.placeholder||t.data("placeholder")||"",e.value=s;var r=i("<div>").attr({"class":t.attr("class"),id:t.attr("id"),name:t.attr("name"),style:t.attr("style")});return t.replaceWith(r),r}var i=window.jQuery||window.Zepto,s=t(7);s.OptionListeners.push(function(t,i){var s=t.$el;s.is("select")&&(s.attr("autofocus")&&setTimeout(function(){t.focus()},1),t.$el=e(s,i),t.$el[0].selectivity=t)})},{7:7,jquery:"jquery"}]},{},[1])(1)});